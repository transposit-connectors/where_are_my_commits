{
  "v2": {
    "transposit": {
      "dependencies": [{
        "name": "transposit/aws_basic:latest",
        "alias": "aws_basic"
      }, {
        "name": "transposit/github:v3.*.*",
        "alias": "github"
      }, {
        "name": "transposit/aws_ecs:v3.*.*",
        "alias": "aws_ecs_staging"
      }, {
        "name": "transposit/aws_ecs:v3.*.*",
        "alias": "aws_ecs_prod"
      }, {
        "name": "transposit/aws_ecs:v3.*.*",
        "alias": "aws_ecs_stage"
      }, {
        "name": "transposit/slack:v1.*.*",
        "alias": "slack"
      }, {
        "name": "nina/slack_webhook:latest",
        "alias": "slack_webhook"
      }, {
        "name": "transposit/slack:v1.*.*",
        "alias": "slack_internal"
      }],
      "operations": [{
        "id": "webhook",
        "function": {
          "parameters": [{
            "name": "http_event",
            "default": {
              "text": "{\"http_method\": \"GET\", \"query_parameters\": {}, \"headers\": {}, \"body\": \"\"}"
            },
            "type": "OBJECT"
          }],
          "js": "webhook.js"
        },
        "access": {
          "requireApiKey": true,
          "webhook": true
        }
      }, {
        "id": "prodDeployEnabled",
        "function": {
          "js": "prodDeployEnabled.js"
        }
      }, {
        "id": "get_commit",
        "tql": {
          "parameters": [{
            "name": "sha",
            "type": "STRING"
          }],
          "tql": "SELECT * FROM github.get_commit\n  WHERE owner='transposit'\n  AND shaCode=@sha\n  AND repo='transposit'\n\n/*\n * For sample code and reference material, visit\n * https://api-composition.transposit.com/get-started/sql-quickstart\n */"
        }
      }, {
        "id": "GetDeployedCommits",
        "function": {
          "js": "untitled.js"
        }
      }, {
        "id": "FindCommit",
        "function": {
          "parameters": [{
            "name": "demoCommit",
            "default": {
              "text": "1662de3735e5963c4bba63f1cba940f686e50c54"
            },
            "type": "STRING"
          }, {
            "name": "stagingCommit",
            "default": {
              "text": "b0097afb560495fc15533a24ff98bce716300529"
            },
            "type": "STRING"
          }, {
            "name": "prodCommit",
            "default": {
              "text": "ed8667cd4ce1f0d7991730be226ef1d17153e3a2"
            },
            "type": "STRING"
          }, {
            "name": "sha",
            "default": {
              "text": "99933565881de573346eb83fe8b0fe8e3a911a53"
            },
            "type": "STRING"
          }, {
            "name": "commitMap",
            "type": "OBJECT"
          }],
          "js": "untitled_1.js"
        }
      }, {
        "id": "MakeSlackMessage",
        "function": {
          "parameters": [{
            "name": "sha",
            "type": "STRING"
          }, {
            "name": "commitMap",
            "type": "OBJECT"
          }],
          "js": "webhook_1.js"
        },
        "access": {
          "requireUser": true
        }
      }, {
        "id": "stageNumberMap",
        "function": {
          "js": "stageNumberMap.js"
        }
      }, {
        "id": "get_git_tree",
        "tql": {
          "tql": "SELECT * FROM github.get_git_tree\n  WHERE owner='transposit'\n  AND shaCode='2f89bec90c6bb5891c82ad645edecc532cd874d7'\n  AND repo='transposit'\n  \n\n/*\n * For sample code and reference material, visit\n * https://docs.transposit.com/get-started/sql-quickstart\n */"
        }
      }, {
        "id": "HandleSlackResponse",
        "function": {
          "parameters": [{
            "name": "responseUrl",
            "type": "STRING"
          }],
          "js": "untitled_2.js"
        }
      }, {
        "id": "list_commits",
        "tql": {
          "tql": "SELECT * FROM github.list_commits\n  WHERE owner='transposit'\n  AND repo='transposit'\n  LIMIT 100\n  \n\n/*\n * For sample code and reference material, visit\n * https://docs.transposit.com/get-started/sql-quickstart\n */"
        }
      }, {
        "id": "get_user",
        "tql": {
          "tql": "SELECT * FROM github.get_user_authenticated\n/*\n * For sample code and reference material, visit\n * https://docs.transposit.com/get-started/sql-quickstart\n */"
        }
      }, {
        "id": "GetRecentCommitMap",
        "function": {
          "js": "GetRecentCommitMap.js"
        }
      }, {
        "id": "zGetCommitMap",
        "function": {
          "js": "GetCommitMap.js"
        }
      }, {
        "id": "FindUser",
        "function": {
          "parameters": [{
            "name": "slackUsername",
            "type": "STRING"
          }],
          "js": "FindUser.js"
        }
      }, {
        "id": "get_user_settings_for_user",
        "function": {
          "js": "get_user_settings_for_user.js"
        }
      }],
      "dataConnections": [{
        "ref": "aws_basic",
        "overrides": {
          "swagger": {
            "awsConfig": {
              "region": "us-west-2",
              "service": "events"
            },
            "baseUrl": "https://events.us-west-2.amazonaws.com/",
            "executionLimits": {
            }
          }
        }
      }, {
        "ref": "github.raw",
        "requireConsumerSignin": true,
        "title": "Github"
      }, {
        "ref": "raw_github"
      }, {
        "ref": "aws_ecs_staging.raw.aws_basic"
      }, {
        "ref": "slack.raw",
        "requireConsumerSignin": true,
        "overrides": {
          "swagger": {
            "oauthConfig": {
              "scope": "users:read"
            },
            "executionLimits": {
            }
          }
        },
        "title": "Slack"
      }, {
        "ref": "slack_internal.raw",
        "overrides": {
          "swagger": {
            "oauthConfig": {
            },
            "executionLimits": {
            }
          }
        }
      }],
      "javascriptAPIVersion": "3",
      "source": "src",
      "userSettings": [{
        "name": "fun_messages",
        "description": "Check this box if you'd like fun messages with emojis! Uncheck if you want boring messages.",
        "type": "BOOLEAN",
        "default": "true"
      }, {
        "name": "git_org",
        "description": "The github organization",
        "type": "STRING",
        "default": "transposit"
      }, {
        "name": "git_repo",
        "description": "The github repo",
        "type": "STRING",
        "default": "transposit"
      }, {
        "name": "github_username",
        "description": "Your github username for the Transposit org",
        "type": "STRING"
      }, {
        "name": "slack_username",
        "type": "STRING"
      }],
      "userSettingsDisplay": "GENERATED"
    }
  }
}