{
  "v2": {
    "transposit": {
      "dependencies": [{
        "name": "transposit/github:v3.*.*",
        "alias": "github"
      }, {
        "name": "transposit/aws_ecs:v5.*.*",
        "alias": "aws_ecs_staging"
      }, {
        "name": "transposit/aws_ecs:v5.*.*",
        "alias": "aws_ecs_prod"
      }, {
        "name": "transposit/aws_ecs:v5.*.*",
        "alias": "aws_ecs_stage"
      }, {
        "name": "transposit/slack:v3.*.*",
        "alias": "slack"
      }, {
        "name": "transposit/slack_webhook:v1.*.*",
        "alias": "slack_webhook"
      }, {
        "name": "transposit/aws_cloudwatch_event:v3.*.*",
        "alias": "aws_cloudwatch_event"
      }, {
        "name": "transposit/aws_cloudwatch_event:v2.*.*",
        "alias": "aws_cloudwatch_event_old"
      }],
      "operations": [{
        "id": "webhook",
        "function": {
          "parameters": [{
            "name": "http_event",
            "default": {
              "text": "{\"http_method\": \"GET\", \"query_parameters\": {}, \"headers\": {}, \"body\": \"\"}"
            },
            "type": "OBJECT"
          }],
          "js": "webhook.js"
        },
        "access": {
          "requireApiKey": true,
          "webhook": true
        }
      }, {
        "id": "prodDeployEnabled",
        "function": {
          "js": "prodDeployEnabled.js"
        }
      }, {
        "id": "get_commit",
        "tql": {
          "parameters": [{
            "name": "sha",
            "type": "STRING"
          }],
          "tql": "SELECT * FROM github.get_commit\n  WHERE owner='transposit'\n  AND shaCode=@sha\n  AND repo='transposit'\n\n/*\n * For sample code and reference material, visit\n * https://api-composition.transposit.com/get-started/sql-quickstart\n */"
        }
      }, {
        "id": "GetDeployedCommits",
        "function": {
          "js": "untitled.js"
        }
      }, {
        "id": "FindCommit",
        "function": {
          "parameters": [{
            "name": "demoCommit",
            "default": {
              "text": "1662de3735e5963c4bba63f1cba940f686e50c54"
            },
            "type": "STRING"
          }, {
            "name": "stagingCommit",
            "default": {
              "text": "b0097afb560495fc15533a24ff98bce716300529"
            },
            "type": "STRING"
          }, {
            "name": "prodCommit",
            "default": {
              "text": "ed8667cd4ce1f0d7991730be226ef1d17153e3a2"
            },
            "type": "STRING"
          }, {
            "name": "sha",
            "default": {
              "text": "99933565881de573346eb83fe8b0fe8e3a911a53"
            },
            "type": "STRING"
          }, {
            "name": "commitMap",
            "type": "OBJECT"
          }],
          "js": "untitled_1.js"
        }
      }, {
        "id": "MakeSlackMessage",
        "function": {
          "parameters": [{
            "name": "sha",
            "type": "STRING"
          }, {
            "name": "commitMap",
            "type": "OBJECT"
          }],
          "js": "webhook_1.js"
        },
        "access": {
          "requireUser": true
        }
      }, {
        "id": "stageNumberMap",
        "function": {
          "js": "stageNumberMap.js"
        }
      }, {
        "id": "HandleSlackResponse",
        "function": {
          "parameters": [{
            "name": "response_url",
            "type": "STRING"
          }],
          "js": "untitled_2.js"
        }
      }, {
        "id": "list_commits",
        "tql": {
          "tql": "SELECT * FROM github.list_commits\n  WHERE owner='transposit'\n  AND repo='transposit'\n  LIMIT 100\n  \n\n/*\n * For sample code and reference material, visit\n * https://docs.transposit.com/get-started/sql-quickstart\n */"
        }
      }, {
        "id": "GetRecentCommitMap",
        "function": {
          "js": "GetRecentCommitMap.js"
        }
      }],
      "dataConnections": [{
        "ref": "aws_basic",
        "overrides": {
          "swagger": {
            "awsConfig": {
              "region": "us-west-2",
              "service": "events"
            },
            "baseUrl": "https://events.us-west-2.amazonaws.com/",
            "executionLimits": {
            }
          }
        }
      }, {
        "ref": "github.raw",
        "requireConsumerSignin": true,
        "overrides": {
          "swagger": {
            "oauthConfig": {
              "scope": "user repo"
            },
            "executionLimits": {
            }
          }
        },
        "title": "Github"
      }, {
        "ref": "raw_github"
      }, {
        "ref": "aws_ecs_staging.raw.aws_basic"
      }, {
        "ref": "slack.raw",
        "requireConsumerSignin": true,
        "overrides": {
          "swagger": {
            "oauthConfig": {
              "scope": "users.profile:read "
            },
            "executionLimits": {
            }
          }
        },
        "title": "Slack"
      }, {
        "ref": "slack_internal.raw",
        "overrides": {
          "swagger": {
            "oauthConfig": {
            },
            "executionLimits": {
            }
          }
        }
      }, {
        "ref": "aws_ecs_prod",
        "overrides": {
          "aws": {
            "region": "us-west-2",
            "executionLimits": {
            }
          }
        }
      }, {
        "ref": "aws_ecs_staging",
        "overrides": {
          "aws": {
            "region": "us-west-2",
            "executionLimits": {
            }
          }
        }
      }, {
        "ref": "aws_ecs_stage",
        "overrides": {
          "aws": {
            "region": "us-west-2",
            "executionLimits": {
            }
          }
        }
      }, {
        "ref": "aws_cloudwatch_event",
        "overrides": {
          "aws": {
            "region": "us-west-2",
            "executionLimits": {
            }
          }
        }
      }],
      "javascriptAPIVersion": "3",
      "source": "src",
      "userSettings": [{
        "name": "fun_messages",
        "description": "Check this box if you'd like fun messages with emojis! Uncheck if you want boring messages.",
        "type": "BOOLEAN",
        "default": "true"
      }, {
        "name": "github_username",
        "description": "Your github username for the Transposit org",
        "type": "STRING",
        "hidden": true
      }],
      "userSettingsDisplay": "GENERATED"
    }
  }
}